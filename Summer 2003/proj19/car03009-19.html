<!--
   Homework 19
   Brother Twitchell, CS 273
   Mike Carey
-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
   <head>
      <title>More JavaScript Grades</title>
         <script language="javascript">
<!--
   function CalculateGrade( form )
   {
      var gradeTotals = new Array( 100, 100, 100, 50, 50, 100, 50, 450 );
      var gradeTotal = 0;
      var gradeEarned = 0;

      for( var i=0; i<form.gradeField.length; i++ )
      {
         if( isNaN( form.gradeField[i].value ) || form.gradeField[i].value == "" )
         {
            form.gradeField[i].value = "Err";
         }
         else
         {
            for( var i=0; i<gradeTotals.length; i++ )
            {
               if( parseInt( form.gradeField[i].value ) >= 0 )
               {
                  gradeTotal += gradeTotals[ i ];

                  var val1 = gradeTotals[ i ];
                  var val2 = parseInt( form.gradeField[ i ].value );

                  if( val2 > 0 )
                  {
                     gradeEarned += ( ( val2 * .01 ) * val1 );
                  }
                  // alert( gradeTotal );
               }
               else
               {
                  form.gradeField[i].value = "Err";
               }
            }

         }
      }

      form.pointsPossible.value = gradeTotal;
      form.gradeEarned.value = gradeEarned;

      var avgGrade = gradeEarned / gradeTotal;

      form.averageGrade.value = Math.round( avgGrade * 100 );

      DisplayGrade( Math.round( avgGrade * 100 ) );
   }

   function DisplayGrade( inputValue )
   {
      var testVar = parseInt( inputValue );

      if( ( isNaN( testVar ) ) || ( testVar > 100 ) || ( testVar <= 0 ) )
      {
        alert( 'An invalid number was entered.' );
        document.viewGradeTool.letterGrade.value = "";
      }
      else
      {
         if( testVar >= 90 )
         {
            document.viewGradeTool.letterGrade.value = "A";
         }
         else if( testVar >= 80 )
         {
            if( testVar > 86 )
            {
               document.viewGradeTool.letterGrade.value = "B+";
            }
            else if( testVar > 82 )
            {
               document.viewGradeTool.letterGrade.value = "B";
            }
            else
            {
               document.viewGradeTool.letterGrade.value = "B-";
            }
         }
         else if( testVar >= 70 )
         {
            if( testVar > 76 )
            {
               document.viewGradeTool.letterGrade.value = "C+";
            }
            else if( testVar > 72 )
            {
               document.viewGradeTool.letterGrade.value = "C";
            }
            else
            {
               document.viewGradeTool.letterGrade.value = "C-";
            }
         }
         else if( testVar >= 60 )
         {
            if( testVar > 66 )
            {
               document.viewGradeTool.letterGrade.value = "D+";
            }
            else if( testVar > 62 )
            {
               document.viewGradeTool.letterGrade.value = "D";
            }
            else
            {
               document.viewGradeTool.letterGrade.value = "D-";
            }
         }
         else
         {
            document.viewGradeTool.letterGrade.value = "F";
         }
      }
   }

// -->
         </script>
   </head>
   <body>
      <h1>More JavaScript Grades</h1>
        <form name="viewGradeTool" method="post" action="javascript:void('');">
      <table>
      <tr>
       <td vAlign="top;">
         <P>
            1. <INPUT id="gradeField" type="text" name="gradeField" value="" size="10"><br>
            2. <INPUT id="gradeField" type="text" name="gradeField" value="" size="10"><br>
            3. <INPUT id="gradeField" type="text" name="gradeField" value="" size="10"><br>
            4. <INPUT id="gradeField" type="text" name="gradeField" value="" size="10"><br>
            5. <INPUT id="gradeField" type="text" name="gradeField" value="" size="10"><br>
            6. <INPUT id="gradeField" type="text" name="gradeField" value="" size="10"><br>
            7. <INPUT id="gradeField" type="text" name="gradeField" value="" size="10"><br>
            8. <INPUT id="gradeField" type="text" name="gradeField" value="" size="10"><br>
         </P>
        </td>
        <td  vAlign="top;">
         <P>
            <INPUT id="gradeEarned" type="text" name="gradeEarned" value="" size="10"> Total Earned Points<br>
            <INPUT id="pointsPossible" type="text" name="pointsPossible" value="" size="10"> Total Possible Points<br>
            <INPUT id="averageGrade" type="text" name="averageGrade" value="" size="10"> Average Grade<br>
            <INPUT id="letterGrade" type="text" name="letterGrade" value="" size="10"> Letter Grade<br>
         </P>
        </td>
      </tr>
      </table>
            <INPUT id="Button1" type="button" value="Process Grade" name="Button1" onclick="CalculateGrade(this.form);">
      </form>
      <br>
      <a href="javascript:">JavaScript console</a>
   </body>
</html>
